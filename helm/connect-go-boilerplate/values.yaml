# Default values for connect-go-boilerplate

# Gateway Configuration (Global or Shared)
gateway:
  enabled: true
  name: connect-gw
  className: envoy-gateway

keycloak:
  enabled: true
  name: connect-gw-keycloak
  instances: 1
  hostname: localhost
  relativePath: "/auth"
  realm:
    name: connect-go-realm
  image:
    repository: quay.io/keycloak/keycloak
    tag: 26.0.5
  admin:
    secretName: basic-auth
    username: admin
    password: admin
  service:
    port: 8080
  db:
    secretName: keycloak-db-secret
    # host, port, database, username, password will be taken from postgresql section if enabled
    # manual configuration below is only used if postgresql.enabled is false
    # host: postgres
    # port: 5432
    # database: keycloak
    # username: postgres
    # password: password

postgresql:
  enabled: true
  auth:
    postgresPassword: password
    database: keycloak
    username: postgres
  fullnameOverride: postgres
  primary:
    persistence:
      size: 1Gi
    initdb:
      scripts:
        init_db.sql: "CREATE DATABASE keycloak;"
    service:
      type: NodePort

connectGoBoilerplate:
  # Replica count
  replicaCount: 2

  # Image configuration
  image:
    registry: docker.io
    repository: library/connect-go-boilerplate
    tag: latest
    pullPolicy: IfNotPresent

  # ImagePullSecrets for private registry authentication
  imagePullSecrets: []
    # - name: harbor-secret

  # Service configuration
  service:
    type: ClusterIP
    port: 80
    targetPort: 9000
    # nodePort: 30000
    name: connect-go-boilerplate

  # Resources limits and requests
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  # Health check - Liveness Probe (gRPC)
  # Native gRPC health check
  livenessProbe:
    grpc:
      port: 9000
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3

  # Health check - Readiness Probe (gRPC)
  # Native gRPC health check
  readinessProbe:
    grpc:
      port: 9000
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 2

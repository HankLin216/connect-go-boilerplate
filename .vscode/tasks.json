{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Generate API Proto Files (win)",
			"type": "shell",
			"command": "./utils/generate_proto.bat",
			"args": [
				"${workspaceFolder}\\api"
			],
			"problemMatcher": []
		},
		{
			"label": "Generate Proto Files (win)",
			"type": "shell",
			"command": "./utils/generate_proto.bat",
			"args": [
				"${input:protoDirectory}"
			],
			"problemMatcher": []
		},
		{
			"label": "Build (win)",
			"type": "shell",
			"command": "./utils/build.bat",
			"problemMatcher": [],
			"args": [
				"./config.yaml",
				"${input:buildTarget}",
				"${workspaceFolder}/bin/app.exe"
			]
		},
		{
			"label": "Generate Wire",
			"type": "shell",
			"command": "go",
			"problemMatcher": [
				"$go"
			],
			"args": [
				"generate",
				"./..."
			]
		},
		{
			"label": "Build Image (win)",
			"type": "shell",
			"command": "./utils/build_docker_image.bat",
			"problemMatcher": [],
			"args": [
				"connect-go-boilerplate",
				"${input:buildTarget}",
				"${workspaceFolder}\\Dockerfile"
			]
		},
		{
			"label": "Run Image (win)",
			"type": "shell",
			"command": "./utils/run_docker_image.bat",
			"problemMatcher": [],
			"args": [
				"connect-go-boilerplate",
				"${input:buildTarget}"
			]
		},
		{
			"label": "Run Docker Compose (win)",
			"type": "shell",
			"command": ".\\utils\\run_compose.bat",
			"args": [
				"${input:composeAction}"
			]
		},
		{
			"label": "Helm Install (win)",
			"type": "shell",
			"command": ".\\utils\\helm_install.bat",
			"args": [
				"${input:helmAction}"
			],
			"problemMatcher": []
		},
		{
			"label": "Helm Uninstall (win)",
			"type": "shell",
			"command": ".\\utils\\helm_uninstall.bat",
			"problemMatcher": []
		},
		{
			"label": "Restart Service (win)",
			"type": "shell",
			"command": ".\\utils\\run_compose.bat",
			"args": [
				"restart",
				"${input:serviceToRestart}"
			],
			"problemMatcher": []
		},
		{
			"label": "Export Keycloak Realm (win)",
			"type": "shell",
			"command": ".\\utils\\export_realm.bat",
			"problemMatcher": []
		}
	],
	"inputs": [
		{
			"id": "composeAction",
			"type": "pickString",
			"options": [
				"full",
				"dev-full",
				"app",
				"dev-app",
				"down"
			],
			"description": "Select user action"
		},
		{
			"id": "helmAction",
			"type": "pickString",
			"options": [
				"install",
				"full-install"
			],
			"description": "Select helm action"
		},
		{
			"id": "protoDirectory",
			"type": "promptString",
			"description": "Enter the relative path to the proto files directory (e.g., api/greeter)"
		},
		{
			"id": "buildTarget",
			"type": "pickString",
			"options": [
				"Production",
				"Development"
			],
			"description": "Select build target (Production or Development)"
		},
		{
			"id": "serviceToRestart",
			"type": "pickString",
			"options": [
				"connect-go-boilerplate",
				"envoy-proxy",
				"keycloak",
				"postgres",
				"prometheus",
				"grafana",
				"elasticsearch",
				"kibana",
				"logstash",
				"filebeat"
			],
			"description": "Select service to restart"
		}
	]
}